"use strict";(self.webpackChunk_jupytercad_jupytercad_freecad=self.webpackChunk_jupytercad_jupytercad_freecad||[]).push([[859],{859:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(669),d=a(626),o=a(549),n=a(25),c=a(37);class s{constructor(e){this.collaborative=!0,this._disposed=!1,this._annotationModel=e.annotationModel}get name(){return"jupytercad-fcmodel"}get contentType(){return"FCStd"}get fileFormat(){return"base64"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return""}createNew(e){return new d.JupyterCadModel({sharedModel:e.sharedModel,languagePreference:e.languagePreference,annotationModel:this._annotationModel})}}const i=[{id:"jupytercad:fcplugin",requires:[d.IJupyterCadDocTracker,o.IThemeManager,d.IAnnotationToken,r.ICollaborativeDrive,d.IJCadWorkerRegistryToken,d.IJCadExternalCommandRegistryToken],autoStart:!0,activate:async(e,t,a,r,i,l,y)=>{const u=await(0,c.requestAPI)("jupytercad_freecad/backend-check",{method:"POST",body:JSON.stringify({backend:"FreeCAD"})}),{installed:p}=u,g=new n.JupyterCadWidgetFactory({name:"Jupytercad Freecad Factory",modelName:"jupytercad-fcmodel",fileTypes:["FCStd"],defaultFor:["FCStd"],tracker:t,commands:e.commands,workerRegistry:l,externalCommandRegistry:y,backendCheck:()=>(p||(0,o.showErrorMessage)("FreeCAD is not installed","FreeCAD is required to open FCStd files"),p)});e.docRegistry.addWidgetFactory(g);const C=new s({annotationModel:r});e.docRegistry.addModelFactory(C),e.docRegistry.addFileType({name:"FCStd",displayName:"FCStd",mimeTypes:["application/octet-stream"],extensions:[".FCStd","fcstd"],fileFormat:"base64",contentType:"FCStd"}),i.sharedModelFactory.registerDocumentFactory("FCStd",(()=>new d.JupyterCadDoc)),g.widgetCreated.connect(((r,d)=>{d.context.pathChanged.connect((()=>{t.save(d)})),a.themeChanged.connect(((e,t)=>d.context.model.themeChanged.emit(t))),t.add(d),e.shell.activateById("jupytercad::leftControlPanel"),e.shell.activateById("jupytercad::rightControlPanel")})),console.log("jupytercad:fcplugin is activated!")}}]}}]);