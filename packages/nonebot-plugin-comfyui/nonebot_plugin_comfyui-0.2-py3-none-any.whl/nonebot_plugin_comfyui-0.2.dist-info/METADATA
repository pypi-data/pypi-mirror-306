Metadata-Version: 2.1
Name: nonebot-plugin-comfyui
Version: 0.2
Summary: é€‚ç”¨äºNoneBot2çš„Comfyuiç»˜å›¾æ’ä»¶
Author-Email: DiaoDaiaChan <diaodaiachan@qq.com>
License: MIT
Requires-Python: >=3.10
Requires-Dist: aiohttp>=3.10.10
Requires-Dist: tqdm>=4.66.5
Requires-Dist: aiofiles>=24.1.0
Requires-Dist: nonebot_plugin_alconna>=0.53.1
Requires-Dist: pydantic>=1.10.0
Requires-Dist: nonebot2>=2.2.0
Requires-Dist: pillow>=11.0.0
Requires-Dist: nonebot-plugin-htmlrender>=0.2.0.3
Description-Content-Type: text/markdown

<div align="center">

# nonebot-plugin-comfyui

_â­åŸºäºNoneBot2è°ƒç”¨Comfyui(https://github.com/comfyanonymous/ComfyUI)è¿›è¡Œç»˜å›¾çš„æ’ä»¶â­_  
_â­AIæ–‡ç”Ÿå›¾,å›¾ç”Ÿå›¾...æ’ä»¶(comfyuièƒ½åšåˆ°çš„å®ƒéƒ½å¯ä»¥)â­_  
_â­æœ¬æ’ä»¶é€‚é…å•åç«¯, å¯¹äºå¤šåç«¯è¯·è½¬åˆ°https://github.com/DiaoDaiaChan/nonebot-plugin-stable-diffusion-diaoâ­_

<a href="https://www.python.org/downloads/release/python-390/"><img src="https://img.shields.io/badge/python-3.10+-blue"></a>  <a href=""><img src="https://img.shields.io/badge/QQ-437012661-yellow"></a> <a href="https://github.com/Cvandia/nonebot-plugin-game-torrent/blob/main/LICENCE"><img src="https://img.shields.io/badge/license-MIT-blue"></a> <a href="https://v2.nonebot.dev/"><img src="https://img.shields.io/badge/Nonebot2-2.2.0+-red"></a>

</div>

---

## â­ ä»‹ç»

**æ”¯æŒè°ƒç”¨comfyuiå·¥ä½œæµè¿›è¡Œç»˜ç”»çš„æ’ä»¶, æ”¯æŒé€‰æ‹©å·¥ä½œæµ, è°ƒæ•´åˆ†è¾¨ç‡ç­‰ç­‰**
## ç¾¤ 687904502 / 116994235

## ğŸ“œ å…è´£å£°æ˜

> [!note]
> æœ¬æ’ä»¶ä»…ä¾›**å­¦ä¹ **å’Œ**ç ”ç©¶**ä½¿ç”¨ï¼Œä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨æ’ä»¶çš„é£é™©ã€‚ä½œè€…ä¸å¯¹æ’ä»¶çš„ä½¿ç”¨é€ æˆçš„ä»»ä½•æŸå¤±æˆ–é—®é¢˜è´Ÿè´£ã€‚è¯·åˆç†ä½¿ç”¨æ’ä»¶ï¼Œ**éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚**
ä½¿ç”¨**æœ¬æ’ä»¶å³è¡¨ç¤ºæ‚¨å·²é˜…è¯»å¹¶åŒæ„éµå®ˆä»¥ä¸Šå…è´£å£°æ˜**ã€‚å¦‚æœæ‚¨ä¸åŒæ„æˆ–æ— æ³•éµå®ˆä»¥ä¸Šå£°æ˜ï¼Œè¯·ä¸è¦ä½¿ç”¨æœ¬æ’ä»¶ã€‚


## ğŸ’¿ å®‰è£…

`pip` å®‰è£…

```bash
pip install nonebot-plugin-comfyui
```
> [!note] åœ¨nonebotçš„pyproject.tomlä¸­çš„plugins = ["nonebot_plugin_comfyui"]æ·»åŠ æ­¤æ’ä»¶

`nb-cli`å®‰è£…
```bash
nb plugin install nonebot-plugin-comfyui
```

`git clone`å®‰è£…(ä¸æ¨è)

- å‘½ä»¤çª—å£`cmd`ä¸‹è¿è¡Œ
```bash
git clone https://github.com/DiaoDaiaChan/nonebot-plugin-comfyui
```

## âš™ï¸ é…ç½®

**åœ¨.envä¸­æ·»åŠ ä»¥ä¸‹é…ç½®**

|      åŸºç¡€é…ç½®      |  ç±»å‹  | å¿…å¡«é¡¹ |                é»˜è®¤å€¼                |                                     è¯´æ˜                                     |
|:--------------:|:----:|:---:|:---------------------------------:|:--------------------------------------------------------------------------:|
|  comfyui_url   | str  |  æ˜¯  |      "http://127.0.0.1:8188"      |                                comfyuiåç«¯åœ°å€                                 |
|comfyui_model| str  |  å¦  |                ""                 |                              è¦†å†™åŠ è½½æ¨¡å‹èŠ‚ç‚¹çš„æ—¶å€™ä½¿ç”¨çš„æ¨¡å‹                              |
|  comfyui_workflows_dir  | str  |  æ˜¯  |          ./data/comfyui           |                                comfyuiå·¥ä½œæµè·¯å¾„                                |
| comfyui_default_workflows | str  |  å¦  |             "txt2img"             | ä¸ä¼ å…¥å·¥ä½œæµå‚æ•°çš„æ—¶å€™é»˜è®¤ä½¿ç”¨çš„å·¥ä½œæµåç§°(è¯·ä½ è‡ªå·±å‡†å¤‡å–œæ¬¢çš„å·¥ä½œæµ, æˆ–è€…å¤åˆ¶æœ¬ä»“åº“ä¸­çš„comfyui_work_flowsä¸­çš„å·¥ä½œæµæ¥å­¦ä¹ ä½¿ç”¨) |
|  comfyui_max_res  | int  |  å¦  |               2048                |                                 æœ€å¤§åˆ†è¾¨ç‡ ^ 2                                  |
| comfyui_base_res | int  |  å¦  |               1024                |                                 åŸºç¡€åˆ†è¾¨ç‡ ^ 2                                  |
|  comfyui_audit  | bool |  å¦  |               True                |                                   å¯åŠ¨å›¾ç‰‡å®¡æ ¸                                   |
| comfyui_audit_site | str  |  å¦  | "http://server.20020026.xyz:7865" |                                   å›¾ç‰‡å®¡æ ¸åœ°å€                                   |


```env
comfyui_url = "http://127.0.0.1:8188"
comfyui_model = ""
comfyui_workflows_dir = ""
comfyui_default_workflows = "txt2img"
comfyui_max_res = 2048
comfyui_base_res = 1024
```

## å…³é”®!
**comfyui_url**å’Œ**comfyui_workflows_dir**æ˜¯å¿…é¡»çš„, å¦åˆ™æ’ä»¶æ— æ³•æ­£å¸¸å·¥ä½œ
# é‡è¦!
### å…³äºcomfyui_workflows_dirè·¯å¾„ä¸‹çš„å·¥ä½œæµæ ¼å¼
### è¯·å¯¼å‡ºå·¥ä½œæµçš„æ—¶å€™é€‰æ‹©å¯¼å‡ºä¸ºAPIæ ¼å¼!
## [é‡è¦!æ’ä»¶åŸºç¡€èŠå£«](./docs/md/node_control.md)

## â­ ä½¿ç”¨

> [!note]
> è¯·æ³¨æ„ä½ çš„ `COMMAND_START` ä»¥åŠä¸Šè¿°é…ç½®é¡¹ã€‚

### æŒ‡ä»¤ï¼š

|    æŒ‡ä»¤     | éœ€è¦@ | èŒƒå›´ |   è¯´æ˜    |æƒé™|
|:---------:|:---:|:---:|:-------:|:---:|
|  prompt   |  å¦  |all|  ç”Ÿæˆå›¾ç‰‡   |all|
| comfyuiå¸®åŠ© |  å¦  |all| è·å–ç®€æ˜“å¸®åŠ©  |all|
|   æŸ¥çœ‹å·¥ä½œæµ   |  å¦  |all| æŸ¥çœ‹æ‰€æœ‰å·¥ä½œæµ |all|


## ğŸ’ ç‰¹åˆ«é¸£è°¢

- [x] [nonebot2](https://github.com/nonebot/nonebot2): æœ¬é¡¹ç›®çš„åŸºç¡€ï¼Œéå¸¸å¥½ç”¨çš„èŠå¤©æœºå™¨äººæ¡†æ¶ã€‚

## TODO
- [ ] æ”¯æŒä¸­æ–‡ç”Ÿå›¾
- [x] æ”¯æŒå›¾ç‰‡å®¡æ ¸
- [ ] æŸ¥çœ‹å†å²ç”Ÿå›¾è®°å½•
- [ ] å¤šåª’ä½“æ”¯æŒ (ç°åœ¨åªæ”¯æŒå›¾ç‰‡)

## æ›´æ–°æ—¥å¿—
### 2024.11.2
- æ›´æ–°äº†å›¾ç‰‡å¸®åŠ©, ä»¥åŠå›¾ç‰‡å·¥ä½œæµ
- ç¼–å†™äº†æ–°çš„è¯´æ˜
### 2024.10.29 
- æ·»åŠ  æŸ¥çœ‹å·¥ä½œæµ å‘½ä»¤