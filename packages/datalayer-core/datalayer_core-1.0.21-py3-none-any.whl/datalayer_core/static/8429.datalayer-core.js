/*! For license information please see 8429.datalayer-core.js.LICENSE.txt */
(self.webpackChunk_datalayer_core=self.webpackChunk_datalayer_core||[]).push([[8429],{18429:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Twitter:()=>g,default:()=>j});var r=n(91896),o=n(56769),i=n(81457),a=n(74151),l=n(58169),c=n(13676),s=n(55627),u=n(87822),d="https://platform.twitter.com/widgets.js",f="createTimeline",h=function(e){var t=o.useRef(null),r=o.useState(!0),i=r[0],a=r[1];return o.useEffect((function(){var r=!0;return n(40440)(d,"twitter-embed",(function(){if(window.twttr){if(r){if(!window.twttr.widgets[f])return void console.error("Method "+f+" is not present anymore in twttr.widget api");var n=function(){var n,r,o=Object.assign({},e.options);return null!=e&&e.autoHeight&&(o.height=null===(n=t.current)||void 0===n||null===(r=n.parentNode)||void 0===r?void 0:r.offsetHeight),Object.assign({},o,{theme:null==e?void 0:e.theme,linkColor:null==e?void 0:e.linkColor,borderColor:null==e?void 0:e.borderColor,lang:null==e?void 0:e.lang,tweetLimit:null==e?void 0:e.tweetLimit,ariaPolite:null==e?void 0:e.ariaPolite})}();n=function(t){return t.chrome="",e.noHeader&&(t.chrome=t.chrome+" noheader"),e.noFooter&&(t.chrome=t.chrome+" nofooter"),e.noBorders&&(t.chrome=t.chrome+" noborders"),e.noScrollbar&&(t.chrome=t.chrome+" noscrollbar"),e.transparent&&(t.chrome=t.chrome+" transparent"),t}(n),window.twttr.widgets[f]({sourceType:e.sourceType,screenName:e.screenName,userId:e.userId,ownerScreenName:e.ownerScreenName,slug:e.slug,id:e.id||e.widgetId,url:e.url},null==t?void 0:t.current,n).then((function(t){a(!1),e.onLoad&&e.onLoad(t)}))}}else console.error("Failure to load window.twttr, aborting load")})),function(){r=!1}}),[]),o.createElement(o.Fragment,null,i&&o.createElement(o.Fragment,null,e.placeholder),o.createElement("div",{ref:t}))},w="createTweet",m=function(e){var t=o.useRef(null),r=o.useState(!0),i=r[0],a=r[1];return o.useEffect((function(){var r=!0;return n(40440)(d,"twitter-embed",(function(){if(window.twttr){if(r){if(!window.twttr.widgets[w])return void console.error("Method "+w+" is not present anymore in twttr.widget api");window.twttr.widgets[w](e.tweetId,null==t?void 0:t.current,e.options).then((function(t){a(!1),e.onLoad&&e.onLoad(t)}))}}else console.error("Failure to load window.twttr, aborting load")})),function(){r=!1}}),[]),o.createElement(o.Fragment,null,i&&o.createElement(o.Fragment,null,e.placeholder),o.createElement("div",{ref:t}))},v=n(60638),p=n(13565),x=n(2550);const g=()=>{const e=(0,v.aF)(),t=(0,p.qX)(),n=(0,p.Ae)(),{tweet:d,unlinkTwitter:f}=(0,v.YT)(),{enqueueToast:w}=(0,v.pm)(),g=t.layout().screenCapture,[j,b]=(0,o.useState)(void 0!==e.twitter?.screenName),[y,k]=(0,o.useState)(),[T,Z]=(0,o.useState)({text:void 0}),[C,N]=(0,o.useState)({text:void 0});return(0,o.useEffect)((()=>{N({...C,text:void 0===T.text?void 0:T.text.length>2&&T.text.length<280})}),[T]),(0,o.useEffect)((()=>{b(void 0!==e.twitter?.screenName)}),[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.NX,{tab:"twitter"}),(0,r.jsxs)(i.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(i.Z,{children:j?(0,r.jsxs)(i.Z,{mt:3,children:[(0,r.jsx)(i.Z,{mb:3,children:(0,r.jsxs)(a.Z,{children:["Your Datalayer account is linked with the Twitter account ",(0,r.jsxs)(l.Z,{target:"_blank",href:`https://x.com/${e.twitter?.screenName}`,children:["@",e.twitter?.screenName]}),"."]})}),(0,r.jsx)(c.r,{variant:"default",onClick:e=>{e.preventDefault(),f().then((e=>{e.success&&(b(!1),w("Your account is unlinked.",{variant:"success"}))}))},children:"Unlink your Twitter account"})]}):(0,r.jsx)(i.Z,{mt:3,children:(0,r.jsx)(c.r,{variant:"primary",onClick:t=>{t.preventDefault(),window.location.href=`${n.configuration.iamRunUrl}/api/iam/v1/twitter/link/${e?.handle}`},children:"Link with your Twitter account"})})}),(0,r.jsx)(i.Z,{pt:3,children:j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(s.Z.Label,{children:"Your tweet"}),(0,r.jsx)(u.ZP,{block:!0,value:T.text,onChange:e=>{Z((t=>({...t,text:e.target.value})))}}),T.text&&T.text.length>0&&!1===C.text&&(0,r.jsx)(s.Z.Validation,{variant:"error",children:"Tweet characters count must be between 2 and 280."})]}),g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{pt:3,children:(0,r.jsx)("img",{src:g})}),(0,r.jsx)(i.Z,{pt:3,children:(0,r.jsx)(l.Z,{href:"",onClick:e=>{e.preventDefault(),t.layout().captureScreen(void 0)},children:"Remove image."})})]}),(0,r.jsx)(i.Z,{pt:3,children:(0,r.jsx)(c.r,{variant:"primary",disabled:!C.text,onClick:e=>{e.preventDefault(),k(void 0),d(T.text,g).then((e=>{e.success&&(Z({text:""}),k(e.status.id_str),t.layout().captureScreen(void 0),w("Your tweet has been posted.",{variant:"success"}))}))},children:"Tweet"})})]})})]}),(0,r.jsxs)(i.Z,{ml:3,children:[y&&(0,r.jsx)(m,{tweetId:y}),j&&(0,r.jsx)(h,{sourceType:"profile",screenName:e.twitter?.screenName,options:{height:400}})]})]})]})},j=g},40440:(e,t,n)=>{var r,o,i;i=function(){var e,t,n=document,r=n.getElementsByTagName("head")[0],o="push",i="readyState",a="onreadystatechange",l={},c={},s={},u={};function d(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return 1}function f(e,t){d(e,(function(e){return t(e),1}))}function h(t,n,r){t=t[o]?t:[t];var i=n&&n.call,a=i?n:r,m=i?t.join(""):n,v=t.length;function p(e){return e.call?e():l[e]}function x(){if(! --v)for(var e in l[m]=1,a&&a(),s)d(e.split("|"),p)&&!f(s[e],p)&&(s[e]=[])}return setTimeout((function(){f(t,(function t(n,r){return null===n?x():(r||/^https?:\/\//.test(n)||!e||(n=-1===n.indexOf(".js")?e+n+".js":e+n),u[n]?(m&&(c[m]=1),2==u[n]?x():setTimeout((function(){t(n,!0)}),0)):(u[n]=1,m&&(c[m]=1),void w(n,x)))}))}),0),h}function w(e,o){var l,c=n.createElement("script");c.onload=c.onerror=c[a]=function(){c[i]&&!/^c|loade/.test(c[i])||l||(c.onload=c[a]=null,l=1,u[e]=2,o())},c.async=1,c.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,r.insertBefore(c,r.lastChild)}return h.get=w,h.order=function(e,t,n){!function r(o){o=e.shift(),e.length?h(o,r):h(o,t,n)}()},h.path=function(t){e=t},h.urlArgs=function(e){t=e},h.ready=function(e,t,n){e=e[o]?e:[e];var r,i=[];return!f(e,(function(e){l[e]||i[o](e)}))&&d(e,(function(e){return l[e]}))?t():(r=e.join("|"),s[r]=s[r]||[],s[r][o](t),n&&n(i)),h},h.done=function(e){h([null],e)},h},e.exports?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)}}]);