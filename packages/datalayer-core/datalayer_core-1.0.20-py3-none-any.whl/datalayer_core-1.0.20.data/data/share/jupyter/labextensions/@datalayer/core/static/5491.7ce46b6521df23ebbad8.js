"use strict";(self.webpackChunk_datalayer_core=self.webpackChunk_datalayer_core||[]).push([[5491],{25491:(e,s,t)=>{t.r(s),t.d(s,{ExercisePublic:()=>x,default:()=>h});var n=t(74512),i=t(66029),r=t(99608),a=t(40809),l=t(23189),o=t(9750),c=t(7185),u=t(53133),d=t(69058);const x=()=>{const{exerciseId:e}=(0,r.UO)();if(!e)return(0,n.jsx)(n.Fragment,{});const s=(0,d.qX)(),t=(0,o.useOutputsStore)(),x=s.iam().user,{kernelManager:h,defaultKernel:p}=(0,o.useJupyter)(),{refreshExercise:f,getExercise:g,cloneExercise:j}=(0,u.YT)(),m=(0,u.s0)(),y=(0,a.useConfirm)(),{enqueueToast:B}=(0,u.pm)(),[v]=(0,i.useState)("exercise-student"),[b,k]=(0,i.useState)(!1),[T,E]=(0,i.useState)(),[S,C]=(0,i.useState)((0,o.newUuid)()),[$,P]=(0,i.useState)(!1),w=t.getInput(v),_=(0,i.useMemo)((()=>p),[h]),V=t.getGradeSuccess(v);(0,i.useEffect)((()=>{V&&(P(V),setTimeout((()=>{P(!1)}),5e3))}),[V]),(0,i.useEffect)((()=>{f(e).then((s=>{if(s.success){const s=g(e);s||m("/"),E(s)}}))}),[]);const I=(0,i.useCallback)((async t=>{y({title:"Are you sure?",content:"Please confirm you want to clone this exercise in your private library."}).then((t=>{t&&j(e).then((e=>{e.success&&(B(e.message,{variant:"success"}),s.layout().triggerItemsRefresh(),m(`/${x.handle}/library/exercises`))}))}))}),[y,T]);return T?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Pagehead,{children:(0,n.jsxs)(a.Box,{display:"flex",children:[(0,n.jsx)(a.Box,{flex:1,children:(0,n.jsx)(a.Heading,{sx:{fontSize:3},children:"Exercise"})}),(0,n.jsx)(a.Box,{children:(0,n.jsxs)(a.ButtonGroup,{children:[x&&T&&(0,n.jsx)(a.Button,{variant:"default",size:"small",onClick:()=>m(`/${T.organization?.handle??T.owner?.handle}/${T.space?.handle}/exercise/${T.id}`),children:"Edit"}),x&&T&&(0,n.jsx)(a.Button,{variant:"default",size:"small",leadingVisual:l.jcu,onClick:I,children:"Clone"})]})})]})}),(0,n.jsxs)(a.Box,{children:[(0,n.jsx)(a.Text,{children:T.name}),(0,n.jsx)(a.Text,{as:"p",color:"fg.muted",bg:"neutral.muted",p:2,children:T.description})]}),(0,n.jsx)(a.Box,{children:(0,n.jsx)(o.Output,{showEditor:!0,autoRun:!1,disableRun:!1,kernel:_,id:v,codePre:T.codePre,code:T.codeQuestion,receipt:S})}),(0,n.jsxs)(a.Box,{display:"flex",gridGap:3,pt:2,pb:2,children:[(0,n.jsx)(a.Box,{children:(0,n.jsx)(a.Button,{variant:"danger",leadingVisual:l.UOT,onClick:e=>{e.preventDefault(),k(!b)},children:"Show help"})}),(0,n.jsx)(a.Box,{children:(0,n.jsx)(a.Button,{variant:"default",leadingVisual:l.bnu,onClick:e=>{e.preventDefault(),t.setInput(v,T.codeQuestion)},children:"Reset"})})]}),b&&(0,n.jsx)(a.Text,{as:"p",color:"danger.fg",p:2,children:T.help??"No help available."}),(0,n.jsxs)(a.Box,{children:[(0,n.jsx)(a.Button,{variant:"default",leadingVisual:l.Zi2,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),t.setExecuteRequest(v,`\nsetup_state(stu_code = """${T.codePre}\n${w}""", sol_code = """${T.codePre}\n${T.codeSolution}""")\n${T.codeTest}\nfrom IPython.core.display import HTML\nHTML('<div style="display: none">You have passed the exercise! Your receipt is ${S}</div><h1>ðŸŽ‰ Success!</h1>')\n`)},children:"Validate your solution"}),(0,n.jsx)(a.Text,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Validate your solution with this button."})]}),$&&(0,n.jsx)(c.xP,{})]}):(0,n.jsx)(n.Fragment,{})},h=x}}]);