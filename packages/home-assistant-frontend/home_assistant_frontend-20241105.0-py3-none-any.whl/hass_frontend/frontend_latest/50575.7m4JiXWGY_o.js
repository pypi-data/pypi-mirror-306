export const id=50575;export const ids=[50575];export const modules={83546:(e,o,t)=>{var r=t(36312),i=t(68689),s=t(93027),a=t(15112),l=t(77706);(0,r.A)([(0,l.EM)("ha-assist-chip")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,l.MZ)({type:Boolean,reflect:!0})],key:"filled",value:()=>!1},{kind:"field",decorators:[(0,l.MZ)({type:Boolean})],key:"active",value:()=>!1},{kind:"field",static:!0,key:"styles",value(){return[...(0,i.A)(t,"styles",this),a.AH`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailingIcon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:Roboto,sans-serif}`]}},{kind:"method",key:"renderOutline",value:function(){return this.filled?a.qy`<span class="filled"></span>`:(0,i.A)(t,"renderOutline",this,3)([])}},{kind:"method",key:"getContainerClasses",value:function(){return{...(0,i.A)(t,"getContainerClasses",this,3)([]),active:this.active}}},{kind:"method",key:"renderPrimaryContent",value:function(){return a.qy` <span class="leading icon" aria-hidden="true"> ${this.renderLeadingIcon()} </span> <span class="label">${this.label}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${this.renderTrailingIcon()} </span> `}},{kind:"method",key:"renderTrailingIcon",value:function(){return a.qy`<slot name="trailing-icon"></slot>`}}]}}),s.z)},84563:(e,o,t)=>{var r=t(36312),i=t(68689),s=(t(89655),t(253),t(54846),t(15112)),a=t(77706);(0,r.A)([(0,a.EM)("ha-ansi-to-html")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,a.MZ)()],key:"content",value:void 0},{kind:"field",decorators:[(0,a.P)("pre")],key:"_pre",value:void 0},{kind:"field",decorators:[(0,a.wk)()],key:"_filter",value:()=>""},{kind:"method",key:"render",value:function(){return s.qy`<pre></pre>`}},{kind:"method",key:"firstUpdated",value:function(e){(0,i.A)(t,"firstUpdated",this,3)([e]),this.content&&this.parseTextToColoredPre(this.content)}},{kind:"get",static:!0,key:"styles",value:function(){return s.AH`pre{overflow-x:auto;white-space:pre-wrap;overflow-wrap:break-word;margin:0}.bold{font-weight:700}.italic{font-style:italic}.underline{text-decoration:underline}.strikethrough{text-decoration:line-through}.underline.strikethrough{text-decoration:underline line-through}.fg-red{color:var(--error-color)}.fg-green{color:var(--success-color)}.fg-yellow{color:var(--warning-color)}.fg-blue{color:var(--info-color)}.fg-magenta{color:#762671}.fg-cyan{color:#2cb5e9}.fg-white{color:#ccc}.bg-black{background-color:#000}.bg-red{background-color:var(--error-color)}.bg-green{background-color:var(--success-color)}.bg-yellow{background-color:var(--warning-color)}.bg-blue{background-color:var(--info-color)}.bg-magenta{background-color:#762671}.bg-cyan{background-color:#2cb5e9}.bg-white{background-color:#ccc}::highlight(search-results){background-color:var(--primary-color);color:var(--text-primary-color)}`}},{kind:"method",key:"parseLinesToColoredPre",value:function(e,o=!1){for(const t of e)this.parseLineToColoredPre(t,o)}},{kind:"method",key:"parseLineToColoredPre",value:function(e,o=!1){const t=document.createElement("div"),r=/\x1b(?:\[(.*?)[@-~]|\].*?(?:\x07|\x1b\\))/g;let i=0;const s={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null},a=e=>{const o=document.createElement("span");s.bold&&o.classList.add("bold"),s.italic&&o.classList.add("italic"),s.underline&&o.classList.add("underline"),s.strikethrough&&o.classList.add("strikethrough"),null!==s.foregroundColor&&o.classList.add(`fg-${s.foregroundColor}`),null!==s.backgroundColor&&o.classList.add(`bg-${s.backgroundColor}`),o.appendChild(document.createTextNode(e)),t.appendChild(o)};let l;for(;null!==(l=r.exec(e));){const o=l.index,t=e.substring(i,o);t&&a(t),i=o+l[0].length,void 0!==l[1]&&l[1].split(";").forEach((e=>{switch(parseInt(e,10)){case 0:s.bold=!1,s.italic=!1,s.underline=!1,s.strikethrough=!1,s.foregroundColor=null,s.backgroundColor=null;break;case 1:s.bold=!0;break;case 3:s.italic=!0;break;case 4:s.underline=!0;break;case 9:s.strikethrough=!0;break;case 22:s.bold=!1;break;case 23:s.italic=!1;break;case 24:s.underline=!1;break;case 29:s.strikethrough=!1;break;case 30:case 39:s.foregroundColor=null;break;case 31:s.foregroundColor="red";break;case 32:s.foregroundColor="green";break;case 33:s.foregroundColor="yellow";break;case 34:s.foregroundColor="blue";break;case 35:s.foregroundColor="magenta";break;case 36:s.foregroundColor="cyan";break;case 37:s.foregroundColor="white";break;case 40:s.backgroundColor="black";break;case 41:s.backgroundColor="red";break;case 42:s.backgroundColor="green";break;case 43:s.backgroundColor="yellow";break;case 44:s.backgroundColor="blue";break;case 45:s.backgroundColor="magenta";break;case 46:s.backgroundColor="cyan";break;case 47:s.backgroundColor="white";break;case 49:s.backgroundColor=null}}))}const n=e.substring(i);n&&a(n),o?(this._pre?.prepend(t),t.animate([{opacity:0},{opacity:1}],{duration:500})):this._pre?.appendChild(t),this._filter&&this.filterLines(this._filter)}},{kind:"method",key:"parseTextToColoredPre",value:function(e){const o=e.split("\n");for(const e of o)this.parseLineToColoredPre(e)}},{kind:"method",key:"filterLines",value:function(e){this._filter=e;const o=this.shadowRoot?.querySelectorAll("div")||[];let t=0;if(e){const r=[];o.forEach((o=>{if(o.textContent?.toLowerCase().includes(e.toLowerCase())){if(o.style.display="",t++,CSS.highlights&&null!==o.firstChild&&o.textContent){o.querySelectorAll("span").forEach((o=>{const t=o.textContent.toLowerCase(),i=[];let s=0;for(;s<t.length;){const o=t.indexOf(e.toLowerCase(),s);if(-1===o)break;i.push(o),s=o+e.length}i.forEach((t=>{const i=new Range;i.setStart(o.firstChild,t),i.setEnd(o.firstChild,t+e.length),r.push(i)}))}))}}else o.style.display="none"})),CSS.highlights&&CSS.highlights.set("search-results",new Highlight(...r))}else o.forEach((e=>{e.style.display=""})),t=o.length,CSS.highlights&&CSS.highlights.delete("search-results");return!!t}},{kind:"method",key:"clear",value:function(){this._pre&&(this._pre.innerHTML="")}}]}}),s.WF)},37629:(e,o,t)=>{t.r(o),t.d(o,{HaCircularProgress:()=>n});var r=t(36312),i=t(68689),s=t(99322),a=t(15112),l=t(77706);let n=(0,r.A)([(0,l.EM)("ha-circular-progress")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,l.MZ)({attribute:"aria-label",type:String})],key:"ariaLabel",value:()=>"Loading"},{kind:"field",decorators:[(0,l.MZ)()],key:"size",value:()=>"medium"},{kind:"method",key:"updated",value:function(e){if((0,i.A)(t,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"field",static:!0,key:"styles",value(){return[...(0,i.A)(t,"styles",this),a.AH`:host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}`]}}]}}),s.U)},36885:(e,o,t)=>{var r=t(36312),i=t(68689),s=t(408),a=t(15112),l=t(77706);(0,r.A)([(0,l.EM)("ha-md-divider")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",static:!0,key:"styles",value(){return[...(0,i.A)(t,"styles",this),a.AH`:host{--md-divider-color:var(--divider-color)}`]}}]}}),s.h)},37849:(e,o,t)=>{var r=t(36312),i=t(68689),s=t(12252),a=t(15112),l=t(77706);(0,r.A)([(0,l.EM)("ha-md-menu-item")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"clickAction",value:void 0},{kind:"field",static:!0,key:"styles",value(){return[...(0,i.A)(t,"styles",this),a.AH`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-menu-item-label-text-font:Roboto,sans-serif}:host(.warning){--md-menu-item-label-text-color:var(--error-color);--md-menu-item-leading-icon-color:var(--error-color)}::slotted([slot=headline]){text-wrap:nowrap}`]}}]}}),s.c)},93663:(e,o,t)=>{var r=t(36312),i=t(68689),s=t(7651),a=t(85192),l=t(15112),n=t(77706);(0,r.A)([(0,n.EM)("ha-menu")],(function(e,o){class t extends o{constructor(...o){super(...o),e(this)}}return{F:t,d:[{kind:"method",key:"connectedCallback",value:function(){(0,i.A)(t,"connectedCallback",this,3)([]),this.addEventListener("close-menu",this._handleCloseMenu)}},{kind:"method",key:"_handleCloseMenu",value:function(e){e.detail.reason.kind===a.fi.KEYDOWN&&e.detail.reason.key===a.NV.ESCAPE||e.detail.initiator.clickAction?.(e.detail.initiator)}},{kind:"field",static:!0,key:"styles",value(){return[...(0,i.A)(t,"styles",this),l.AH`:host{--md-sys-color-surface-container:var(--card-background-color)}`]}}]}}),s.vI)},95753:(e,o,t)=>{t.d(o,{L:()=>r,_:()=>i});const r=e=>e.callApi("GET","error_log"),i="/api/error_log"},26025:(e,o,t)=>{t.d(o,{PS:()=>i,Tv:()=>l,VR:()=>s,lE:()=>n});t(24545),t(51855),t(82130),t(31743),t(22328),t(4959),t(62435);if(33524==t.j)var r=t(95266);const i=e=>e.data,s=e=>"object"==typeof e?"object"==typeof e.body?e.body.message||"Unknown error, see supervisor logs":e.body||e.message||"Unknown error, see supervisor logs":e,a=new Set([502,503,504]),l=e=>!!(e&&e.status_code&&a.has(e.status_code))||!(!e||!e.message||!e.message.includes("ERR_CONNECTION_CLOSED")&&!e.message.includes("ERR_CONNECTION_RESET")),n=async(e,o)=>(0,r.v)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:`/${o}/stats`,method:"get"}):i(await e.callApi("GET",`hassio/${o}/stats`))},15066:(e,o,t)=>{if(t.d(o,{GM:()=>a,MU:()=>l,OV:()=>s,RE:()=>d,Vo:()=>h,Yd:()=>u,h$:()=>n,w9:()=>g,y0:()=>c}),33524==t.j)var r=t(95266);var i=t(26025);const s=async e=>{(0,r.v)(e.config.version,2021,2,4)?await e.callWS({type:"supervisor/api",endpoint:"/supervisor/reload",method:"post"}):await e.callApi("POST","hassio/supervisor/reload")},a=async e=>(0,r.v)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/supervisor/info",method:"get"}):(0,i.PS)(await e.callApi("GET","hassio/supervisor/info")),l=async e=>(0,r.v)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/info",method:"get"}):(0,i.PS)(await e.callApi("GET","hassio/info")),n=async e=>e.callApi("GET","hassio/host/logs/boots"),d=async(e,o,t,r=0)=>e.callApiRaw("GET",`hassio/${o.includes("_")?`addons/${o}`:o}/logs${0!==r?`/boots/${r}`:""}`,void 0,t?{Range:t}:void 0),c=async(e,o,t,r=100,i=0)=>e.callApiRaw("GET",`hassio/${o.includes("_")?`addons/${o}`:o}/logs${0!==i?`/boots/${i}`:""}/follow?lines=${r}`,void 0,void 0,t),h=e=>`/api/hassio/${e.includes("_")?`addons/${e}`:e}/logs`,u=(e,o,t=0)=>`/api/hassio/${e.includes("_")?`addons/${e}`:e}/logs${0!==t?`/boots/${t}`:""}?lines=${o}`,g=async(e,o)=>{(0,r.v)(e.config.version,2021,2,4)?await e.callWS({type:"supervisor/api",endpoint:"/supervisor/options",method:"post",data:o}):await e.callApi("POST","hassio/supervisor/options",o)}},50575:(e,o,t)=>{var r=t(36312),i=t(68689),s=(t(253),t(2075),t(16891),t(67056),t(15112)),a=t(85323),l=t(60493),n=t(77706),d=(t(13292),t(84563),t(13082),t(77372),t(28066),t(88400),t(37629),t(83546),t(93663),t(37849),t(36885),t(94526)),c=t(95753),h=t(26025),u=t(15066),g=t(30489),p=t(95266),v=t(33922),m=t(18409),k=t(34897);const f="M19.92,12.08L12,20L4.08,12.08L5.5,10.67L11,16.17V2H13V16.17L18.5,10.66L19.92,12.08M12,20H2V22H22V20H12Z",y="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,r.A)([(0,n.EM)("error-log-card")],(function(e,o){class r extends o{constructor(...o){super(...o),e(this)}}return{F:r,d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)()],key:"filter",value:()=>""},{kind:"field",decorators:[(0,n.MZ)()],key:"header",value:void 0},{kind:"field",decorators:[(0,n.MZ)()],key:"provider",value:void 0},{kind:"field",decorators:[(0,n.MZ)({type:Boolean,attribute:!0})],key:"show",value:()=>!1},{kind:"field",decorators:[(0,n.P)(".error-log")],key:"_logElement",value:void 0},{kind:"field",decorators:[(0,n.P)("#scroll-top-marker")],key:"_scrollTopMarkerElement",value:void 0},{kind:"field",decorators:[(0,n.P)("#scroll-bottom-marker")],key:"_scrollBottomMarkerElement",value:void 0},{kind:"field",decorators:[(0,n.P)("ha-ansi-to-html")],key:"_ansiToHtmlElement",value:void 0},{kind:"field",decorators:[(0,n.P)("#boots-menu")],key:"_bootsMenu",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_firstCursor",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_scrolledToBottomController",value(){return new l.Q(this,{callback:e=>e[0].isIntersecting})}},{kind:"field",decorators:[(0,n.wk)()],key:"_scrolledToTopController",value(){return new l.Q(this,{})}},{kind:"field",decorators:[(0,n.wk)()],key:"_newLogsIndicator",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_logStreamAborter",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_streamSupported",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_loadingState",value:()=>"loading"},{kind:"field",decorators:[(0,n.wk)()],key:"_loadingPrevState",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_noSearchResults",value:()=>!1},{kind:"field",decorators:[(0,n.wk)()],key:"_numberOfLines",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_boot",value:()=>0},{kind:"field",decorators:[(0,n.wk)()],key:"_boots",value:void 0},{kind:"method",key:"render",value:function(){return s.qy` <div class="error-log-intro"> ${this._error?s.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <ha-card outlined class="${(0,a.H)({hidden:!1===this.show})}"> <div class="header"> <h1 class="card-header"> ${this.header||this.hass.localize("ui.panel.config.logs.show_full_logs")} </h1> <div class="action-buttons"> ${this._streamSupported&&Array.isArray(this._boots)?s.qy` <ha-assist-chip .label="${0===this._boot?this.hass.localize("ui.panel.config.logs.current"):-1===this._boot?this.hass.localize("ui.panel.config.logs.previous"):this.hass.localize("ui.panel.config.logs.startups_ago",{boot:-1*this._boot})}" id="boots-anchor" @click="${this._toggleBootsMenu}"> <ha-svg-icon slot="trailing-icon" .path="${"M7,10L12,15L17,10H7Z"}"></ha-svg-icon></ha-assist-chip> <ha-menu anchor="boots-anchor" id="boots-menu" positioning="fixed"> ${this._boots.map((e=>s.qy` <ha-md-menu-item .value="${e}" @click="${this._setBoot}" .selected="${e===this._boot}"> ${0===e?this.hass.localize("ui.panel.config.logs.current"):-1===e?this.hass.localize("ui.panel.config.logs.previous"):this.hass.localize("ui.panel.config.logs.startups_ago",{boot:-1*e})} </ha-md-menu-item> ${0===e?s.qy`<ha-md-divider role="separator"></ha-md-divider>`:s.s6} `))} </ha-menu> `:s.s6} <ha-icon-button .path="${y}" @click="${this._downloadFullLog}" .label="${this.hass.localize("ui.panel.config.logs.download_full_log")}"></ha-icon-button> ${!this._streamSupported||this._error?s.qy`<ha-icon-button .path="${"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"}" @click="${this._loadLogs}" .label="${this.hass.localize("ui.common.refresh")}"></ha-icon-button>`:s.s6} </div> </div> <div class="card-content error-log"> <div id="scroll-top-marker"></div> ${"loading"===this._loadingPrevState?s.qy`<div class="loading-old"> <ha-circular-progress .indeterminate="${"loading"===this._loadingPrevState}"></ha-circular-progress> </div>`:s.s6} ${"loading"===this._loadingState?s.qy`<div> ${this.hass.localize("ui.panel.config.logs.loading_log")} </div>`:"empty"===this._loadingState?s.qy`<div> ${this.hass.localize("ui.panel.config.logs.no_errors")} </div>`:s.s6} ${"loaded"===this._loadingState&&this.filter&&this._noSearchResults?s.qy`<div> ${this.hass.localize("ui.panel.config.logs.no_issues_search",{term:this.filter})} </div>`:s.s6} <ha-ansi-to-html></ha-ansi-to-html> <div id="scroll-bottom-marker"></div> </div> <ha-button class="new-logs-indicator ${(0,a.H)({visible:this._newLogsIndicator&&!this._scrolledToBottomController.value||!1})}" @click="${this._scrollToBottom}"> <ha-svg-icon .path="${f}" slot="icon"></ha-svg-icon> ${this.hass.localize("ui.panel.config.logs.scroll_down_button")} <ha-svg-icon .path="${f}" slot="trailingIcon"></ha-svg-icon> </ha-button> </ha-card> ${!1===this.show?s.qy` <ha-button outlined @click="${this._downloadFullLog}"> <ha-svg-icon .path="${y}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.logs.download_full_log")} </ha-button> <mwc-button raised @click="${this._showLogs}"> ${this.hass.localize("ui.panel.config.logs.load_logs")} </mwc-button> `:""} </div> `}},{kind:"method",key:"connectedCallback",value:function(){(0,i.A)(r,"connectedCallback",this,3)([]),void 0===this._streamSupported&&(this._streamSupported=(0,p.v)(this.hass.config.version,2024,11))}},{kind:"method",key:"firstUpdated",value:function(e){(0,i.A)(r,"firstUpdated",this,3)([e]),this._scrolledToBottomController.observe(this._scrollBottomMarkerElement),this._scrolledToTopController.callback=this._handleTopScroll,this._scrolledToTopController.observe(this._scrollTopMarkerElement),window.addEventListener("connection-status",this._handleConnectionStatus),(this.hass?.config.recovery_mode||this.show)&&this.hass.loadFragmentTranslation("config"),this._loadBoots()}},{kind:"method",key:"updated",value:function(e){(0,i.A)(r,"updated",this,3)([e]),(e.has("show")&&this.show||e.has("provider")&&this.show)&&(this._boot=0,this._loadLogs()),this._newLogsIndicator&&this._scrolledToBottomController.value&&(this._newLogsIndicator=!1),e.has("filter")&&this._debounceSearch(),e.has("_loadingState")&&"loaded"===this._loadingState&&this._scrolledToTopController.value&&this._firstCursor&&!this._loadingPrevState&&this._loadMoreLogs()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,i.A)(r,"disconnectedCallback",this,3)([]),this._logStreamAborter&&this._logStreamAborter.abort(),window.removeEventListener("connection-status",this._handleConnectionStatus)}},{kind:"method",key:"_downloadFullLog",value:async function(){if(this._streamSupported)e=this,o={header:this.header,provider:this.provider,defaultLineCount:this._numberOfLines,boot:this._boot},(0,k.r)(e,"show-dialog",{dialogTag:"dialog-download-logs",dialogImport:()=>Promise.all([t.e(57126),t.e(70346),t.e(79448),t.e(69059)]).then(t.bind(t,69059)),dialogParams:o});else{const e=(new Date).toISOString().replace(/:/g,"-"),o=this.provider&&"core"!==this.provider?(0,u.Vo)(this.provider):c._,t=this.provider&&"core"!==this.provider?`${this.provider}_${e}.log`:`home-assistant_${e}.log`,r=await(0,d.e0)(this.hass,o);(0,g.R)(r.path,t)}var e,o}},{kind:"method",key:"_showLogs",value:function(){this.show=!0}},{kind:"method",key:"_loadLogs",value:async function(){this._error=void 0,this._loadingState="loading",this._loadingPrevState=void 0,this._firstCursor=void 0,this._numberOfLines=0,this._ansiToHtmlElement?.clear();try{if(this._logStreamAborter&&this._logStreamAborter.abort(),this._logStreamAborter=new AbortController,this._streamSupported&&(0,v.x)(this.hass,"hassio")&&this.provider){const e=await(0,u.y0)(this.hass,this.provider,this._logStreamAborter.signal,100,this._boot);if(e.headers.has("X-First-Cursor")&&(this._firstCursor=e.headers.get("X-First-Cursor")),!e.body)throw new Error("No stream body found");this._loadingState="empty";let o="";const t=e.body.getReader(),r=new TextDecoder;let i=!1;for(;!i;){const{value:e,done:s}=await t.read();if(i=s,e){const t=r.decode(e,{stream:!i}),s=this._scrolledToBottomController.value,a=`${o}${t}`.split("\n").filter((e=>""!==e.trim()));o=t.endsWith("\n")?"":a.splice(-1,1)[0],a.length&&(this._ansiToHtmlElement?.parseLinesToColoredPre(a),this._numberOfLines+=a.length,"empty"===this._loadingState&&setTimeout((()=>{this._loadingState="loaded"}),100)),s&&this._logElement?this._scrollToBottom():this._newLogsIndicator=!0}}}else{this._streamSupported=!1;let e="";if((0,v.x)(this.hass,"hassio")&&this.provider){const o=await(0,u.RE)(this.hass,this.provider);e=await o.text()}else e=await(0,c.L)(this.hass);e&&(this._ansiToHtmlElement?.parseTextToColoredPre(e),this._loadingState="loaded",this._scrollToBottom())}}catch(e){if("AbortError"===e.name)return;this._error=this.hass.localize("ui.panel.config.logs.failed_get_logs",{provider:this.provider,error:(0,h.VR)(e)})}}},{kind:"field",key:"_debounceSearch",value(){return(0,m.s)((()=>{this._noSearchResults=!this._ansiToHtmlElement?.filterLines(this.filter),this.filter||this._scrollToBottom()}),150)}},{kind:"field",key:"_debounceScrollToBottom",value(){return(0,m.s)((()=>{this._logElement.scrollTop=this._logElement.scrollHeight}),300)}},{kind:"method",key:"_scrollToBottom",value:function(){this._logElement&&(this._newLogsIndicator=!1,"core"!==this.provider?this._logElement.scrollTo(0,this._logElement.scrollHeight):this._debounceScrollToBottom())}},{kind:"field",key:"_handleConnectionStatus",value(){return e=>{"disconnected"===e.detail&&this._logStreamAborter&&this._logStreamAborter.abort(),"connected"===e.detail&&this.show&&this._loadLogs()}}},{kind:"method",key:"_loadMoreLogs",value:async function(){if(this._firstCursor&&"loading"!==this._loadingPrevState&&"loaded"===this._loadingState&&this._logElement){const e=this._scrolledToBottomController.value,o=this._logElement.scrollHeight-this._logElement.scrollTop;this._loadingPrevState="loading";const t=await(0,u.RE)(this.hass,this.provider,`entries=${this._firstCursor}:-100:100`,this._boot);if(t.headers.has("X-First-Cursor")){if(this._firstCursor===t.headers.get("X-First-Cursor"))return void(this._loadingPrevState="end");this._firstCursor=t.headers.get("X-First-Cursor")}const r=await t.text();if(r){const e=r.split("\n").filter((e=>""!==e.trim())).reverse();this._ansiToHtmlElement?.parseLinesToColoredPre(e,!0),this._numberOfLines+=e.length,this._loadingPrevState="loaded"}else this._loadingPrevState="end";e?this._scrollToBottom():"end"!==this._loadingPrevState&&this._logElement&&window.requestAnimationFrame((()=>{this._logElement.scrollTop=this._logElement.scrollHeight-o}))}}},{kind:"field",key:"_handleTopScroll",value(){return e=>{const o=e[0].isIntersecting;return!this._firstCursor||!o||"loaded"!==this._loadingState||this._loadingPrevState&&"loaded"!==this._loadingPrevState||this.filter||this._loadMoreLogs(),o}}},{kind:"method",key:"_loadBoots",value:async function(){if(this._streamSupported&&(0,v.x)(this.hass,"hassio"))try{const{data:e}=await(0,u.h$)(this.hass),o=Object.keys(e.boots).map(Number).sort(((e,o)=>o-e));o.length>1&&(this._boots=o)}catch(e){console.error(e)}}},{kind:"method",key:"_toggleBootsMenu",value:function(){this._bootsMenu&&(this._bootsMenu.open=!this._bootsMenu.open)}},{kind:"method",key:"_setBoot",value:function(e){this._boot=e.target.value,this._loadLogs()}},{kind:"field",static:!0,key:"styles",value:()=>s.AH`.error-log-intro{text-align:center;margin:16px}ha-card{padding-top:8px;position:relative}ha-card.hidden{display:none}ha-card .action-buttons{display:flex;align-items:center;height:100%}.header{display:flex;justify-content:space-between;padding:0 16px}.card-header{color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, 24px);letter-spacing:-.012em;line-height:48px;display:block;margin-block-start:0px;font-weight:400;white-space:nowrap;max-width:calc(100% - 150px);overflow:hidden;text-overflow:ellipsis}ha-icon-button{float:right}.error-log{position:relative;font-family:var(--code-font-family, monospace);clear:both;text-align:left;padding-top:12px;padding-bottom:12px;overflow-y:scroll;min-height:var(--error-log-card-height,calc(100vh - 240px));max-height:var(--error-log-card-height,calc(100vh - 240px));border-top:1px solid var(--divider-color)}@media all and (max-width:870px){.error-log{min-height:var(--error-log-card-height,calc(100vh - 190px));max-height:var(--error-log-card-height,calc(100vh - 190px))}}.error-log>div{overflow:auto;overflow-wrap:break-word}.error-log>div:hover{background-color:var(--secondary-background-color)}.new-logs-indicator{--mdc-theme-primary:var(--text-primary-color);overflow:hidden;position:absolute;bottom:0;left:0;right:0;height:0;background-color:var(--primary-color);border-radius:8px;transition:height .4s ease-out;display:flex;justify-content:space-between;align-items:center}.new-logs-indicator.visible{height:24px}.error{color:var(--error-color)}.warning{color:var(--warning-color)}.loading-old{display:flex;width:100%;justify-content:center;padding:16px}ha-assist-chip{--ha-assist-chip-container-shape:10px;--md-assist-chip-trailing-space:8px}`}]}}),s.WF)},30489:(e,o,t)=>{t.d(o,{R:()=>r});const r=(e,o="")=>{const t=document.createElement("a");t.target="_blank",t.href=e,t.download=o,document.body.appendChild(t),t.dispatchEvent(new MouseEvent("click")),document.body.removeChild(t)}}};
//# sourceMappingURL=50575.7m4JiXWGY_o.js.map